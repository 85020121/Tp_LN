#!/usr/bin/python# -*- coding: utf-8 -*-import reimport feedparserimport nltkfrom urllib import urlopendef rssParse(rss):    articles = {}    # "http://rss.lemonde.fr/c/205/f/3050/index.rss"    feed = feedparser.parse(rss)    for i in feed["items"]:        title = i["title"]        link = i["link"]        url = urlopen(link)        html = url.read()        # recherche de l'encodage de l'article        content_type_regexp = r'''<meta http-equiv="Content-type" content="(.*?)" ?/?>'''        content_type = re.findall(content_type_regexp, html, re.U | re.I | re.DOTALL | re.M)        if len(content_type) > 0:            coding = content_type[0].split("charset=")[-1].lower()            html = unicode(html, coding)        # recuperation du texte de l'article        # <!-- DEBUT  LAYOUT ARTICLE --> ****Article**** <!-- / CONTENU ARTICLE  -->  ==> http://www.lemonde.fr        # <div class="entry-content"> ****Article**** <!-- .entry-content -->   ==> http://bigbrowser.blog.lemonde.fr        article_regexp = r'''(<!-- DEBUT  LAYOUT ARTICLE -->|<div class="entry-content">)(.*)<!--( / CONTENU ARTICLE  | .entry-content )-->'''        result = re.findall(article_regexp, html, re.U | re.S | re.M)        if len(result) > 0:            left, content, right = result[0]            article = nltk.clean_html(content)            articles[title] = article    return articles            